"undefined"==typeof IBCExposureHandler&&(IBCExposureHandler={});
(function(){function h(){MarketExposureObj.eventId=null;MarketExposureObj.marketId=null;MarketExposureObj.numberOfWinner=0;MarketExposureObj.numberOfActiveRunners=0;MarketExposureObj.marketExposure=0;MarketExposureObj.betSelections={};SelectionExposureObj.minExposure=0;SelectionExposureObj.selectionWinPL=0;SelectionExposureObj.selectionLossPL=0}function l(a){var d=a.selectionId;MarketExposureObj.betSelections[d]=MarketExposureObj.betSelections[d]||JSON.parse(JSON.stringify(MarketExposureObj.betSelections[0]));
var b=Object.keys(MarketExposureObj.betSelections).length-1;b>MarketExposureObj.numberOfActiveRunners&&(MarketExposureObj.numberOfActiveRunners=b);var e=b==MarketExposureObj.numberOfActiveRunners,c=0;$j.each(MarketExposureObj.betSelections,function(g,k){var f=k.minExposure;f=d==g?MathUtil.decimal.add(f,a.selectionWinPL):MathUtil.decimal.add(f,a.selectionLossPL);k.minExposure=f;e&&0==g||(c=c>f?f:c)});MarketExposureObj.marketExposure=c}MarketExposureObj={eventId:null,marketId:null,numberOfWinner:0,
numberOfActiveRunners:0,marketExposure:0,betSelections:{}};SelectionExposureObj={minExposure:0,selectionWinPL:0,selectionLossPL:0};IBCExposureHandler.getMarketExposure=function(){return JSON.parse(JSON.stringify(MarketExposureObj))};IBCExposureHandler.setMarketExposure=function(a){h();MarketExposureObj=JSON.parse(JSON.stringify(a))};IBCExposureHandler.initMarketInfo=function(a,d,b,e){h();MarketExposureObj.eventId=a;MarketExposureObj.marketId=d;MarketExposureObj.numberOfWinner=b;MarketExposureObj.numberOfActiveRunners=
e;1==b&&(MarketExposureObj.betSelections[0]=JSON.parse(JSON.stringify(SelectionExposureObj)))};IBCExposureHandler.generatorBetTicketObj=function(a,d,b,e,c,g){e=MathUtil.decimal.multiply(1,MathUtil.decimal.multiply(MathUtil.decimal.subtract(e,1),c));c=MathUtil.decimal.multiply(-1,c);return{eventId:a,marketId:d,selectionId:b,selectionWinPL:!g&&0<e?0:e,selectionLossPL:!g&&0<c?0:c}};IBCExposureHandler.calculateExposure=function(a){if(!$j.isArray(a))throw"betTickets must bet array type.[betTicketObj....]";
if(1!=MarketExposureObj.numberOfWinner)throw"not support multiple winner.";$j.each(a,function(d,b){l(b)})}})();

