"undefined"==typeof BookMakerExposureHandler&&(BookMakerExposureHandler={});
(function(){function h(){MarketExposureObj.eventId=null;MarketExposureObj.marketId=null;MarketExposureObj.defaultActiveRunners=0;MarketExposureObj.numberOfActiveRunners=0;MarketExposureObj.marketExposure=0;MarketExposureObj.betSelections={};SelectionExposureObj.minExposure=0;SelectionExposureObj.diff=0;SelectionExposureObj.selectionWinPL=0;SelectionExposureObj.selectionLossPL=0;NotActiveSelectionIds=[]}function k(a){var c=a.selectionId;MarketExposureObj.betSelections[c]=MarketExposureObj.betSelections[c]||
JSON.parse(JSON.stringify(MarketExposureObj.betSelections[0]));var d=Object.keys(MarketExposureObj.betSelections).length-1==MarketExposureObj.numberOfActiveRunners,f=0;$j.each(MarketExposureObj.betSelections,function(g,e){var b=e.minExposure;b=c==g?MathUtil.decimal.add(b,a.selectionWinPL):MathUtil.decimal.add(b,a.selectionLossPL);e.minExposure=b;d&&0==g||(f=f>b?b:f)});MarketExposureObj.marketExposure=f}MarketExposureObj={eventId:null,marketId:null,defaultActiveRunners:0,numberOfActiveRunners:0,marketExposure:0,
betSelections:{}};SelectionExposureObj={minExposure:0,diff:0,selectionWinPL:0,selectionLossPL:0};NotActiveSelectionIds=[];BookMakerExposureHandler.getMarketExposure=function(){return JSON.parse(JSON.stringify(MarketExposureObj))};BookMakerExposureHandler.setMarketExposure=function(a){h();MarketExposureObj=JSON.parse(JSON.stringify(a))};BookMakerExposureHandler.initMarketInfo=function(a,c,d){h();MarketExposureObj.eventId=a;MarketExposureObj.marketId=c;MarketExposureObj.defaultActiveRunners=d;MarketExposureObj.numberOfActiveRunners=
d;MarketExposureObj.betSelections[0]=JSON.parse(JSON.stringify(SelectionExposureObj))};BookMakerExposureHandler.generatorBetTicketObj=function(a,c,d,f,g,e,b,l,m){a=EventType.SOCCER.unique()===a||EventType.E_SOCCER.unique()===a?MathUtil.decimal.multiply(1==b?1:-1,MathUtil.decimal.multiply(g-1,e)):MathUtil.decimal.multiply(1==b?1:-1,MathUtil.decimal.multiply(MathUtil.decimal.divide(g,100),e));e=MathUtil.decimal.multiply(1==b?-1:1,e);return{eventId:c,marketId:d,selectionId:f,selectionWinPL:a,selectionLossPL:e}};
BookMakerExposureHandler.calculateExposure=function(a){if(!$j.isArray(a))throw"betTickets must bet array type.[betTicketObj....]";$j.each(a,function(c,d){k(d)})}})();

