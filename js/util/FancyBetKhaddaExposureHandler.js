"undefined"==typeof FancyBetKhaddaExposureHandler&&(FancyBetKhaddaExposureHandler={});
(function(){function m(){MarketExposureObj.eventId=null;MarketExposureObj.marketId=null;MarketExposureObj.marketExposure=0;MarketExposureObj.betRunsPls={};MarketExposureObj.betRunsExposures={};RunsProfitLossObj.runsYes=null;RunsProfitLossObj.runsNo=null;RunsProfitLossObj.inRangeRunsPl=0;RunsProfitLossObj.outOfRangeRunsPl=0}function n(f){var b=0,a=f.runsYes,c=f.inRangeRunsPl,e=MarketExposureObj.betRunsExposures[a];null==e?(e=c,$j.each(MarketExposureObj.betRunsPls,function(h,d){a!=h&&(e=h<=a&&a<d.runsNo?
MathUtil.decimal.add(e,d.inRangeRunsPl):MathUtil.decimal.add(e,d.outOfRangeRunsPl))})):e=MathUtil.decimal.add(e,c);MarketExposureObj.betRunsExposures[a]=e;b=b>e?e:b;var g=f.runsNo,l=f.outOfRangeRunsPl,k=MarketExposureObj.betRunsExposures[g];null==k?(k=l,$j.each(MarketExposureObj.betRunsPls,function(h,d){g!=d.runsNo&&(k=h<=g&&g<d.runsNo?MathUtil.decimal.add(k,d.inRangeRunsPl):MathUtil.decimal.add(k,d.outOfRangeRunsPl))})):k=MathUtil.decimal.add(k,l);MarketExposureObj.betRunsExposures[g]=k;b=b>k?k:
b;$j.each(MarketExposureObj.betRunsExposures,function(h,d){a!=h&&g!=h&&(d=a<=h&&h<g?MathUtil.decimal.add(d,c):MathUtil.decimal.add(d,l),MarketExposureObj.betRunsExposures[h]=d,b=b>d?d:b)});return b}MarketExposureObj={eventId:null,marketId:null,marketExposure:0,betRunsPls:{},betRunsExposures:{}};RunsProfitLossObj={runsYes:null,runsNo:null,inRangeRunsPl:0,outOfRangeRunsPl:0};FancyBetKhaddaExposureHandler.getMarketExposure=function(){return JSON.parse(JSON.stringify(MarketExposureObj))};FancyBetKhaddaExposureHandler.setMarketExposure=
function(f){m();MarketExposureObj=JSON.parse(JSON.stringify(f))};FancyBetKhaddaExposureHandler.initMarketInfo=function(f,b){m();MarketExposureObj.eventId=f;MarketExposureObj.marketId=b;MarketExposureObj.betRunsExposures[0]=0};FancyBetKhaddaExposureHandler.generateBetTicketObj=function(f,b,a,c,e,g){e=MathUtil.decimal.multiply(MathUtil.decimal.divide(e,100),g);g=MathUtil.decimal.multiply(-1,g);return{eventId:f,marketId:b,runsYes:a,runsNo:c+1,inRangeRunsPl:e,outOfRangeRunsPl:g}};FancyBetKhaddaExposureHandler.calculateExposure=
function(f){if(!$j.isArray(f))throw"betTickets must bet array type.[betTicketObj....]";$j.each(f,function(b,a){b=MarketExposureObj;var c=MarketExposureObj.betRunsPls[a.runsYes];$j.isEmptyObject(c)?(c=JSON.parse(JSON.stringify(RunsProfitLossObj)),c.runsYes=a.runsYes,c.runsNo=a.runsNo,c.inRangeRunsPl=a.inRangeRunsPl,c.outOfRangeRunsPl=a.outOfRangeRunsPl,MarketExposureObj.betRunsPls[a.runsYes]=c):(c.inRangeRunsPl=MathUtil.decimal.add(c.inRangeRunsPl,a.inRangeRunsPl),c.outOfRangeRunsPl=MathUtil.decimal.add(c.outOfRangeRunsPl,
a.outOfRangeRunsPl));a=n(a);b.marketExposure=a})}})();

