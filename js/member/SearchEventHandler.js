"undefined"==typeof SearchEventHandler&&(SearchEventHandler={});
(function(){function k(d){g=-1;var b=$j("#searchWrap").find("#searchResult"),c=b.find("#searchList");c.find("#noMatching").hide();b.fadeIn(function(){document.body.addEventListener("click",h,!1)});for(var a in d)if(b=d[a],null!=b){var e="result_"+b.eventId+"_"+b.marketId.replace(".","_"),f=c.find("#"+e);if(!(0<f.length)){var p=function(l,m,n){return function(){location.href=PageConfig.fullMarketPath+"?eventType="+l+"&eventId="+m+"&marketId="+n}}(b.eventType,b.eventId,b.marketId);f=c.find("#resultTemplate").clone();
f.prop("id",e);f.find("a").html(b.marketTimeStr+" "+b.name);f.find("a").on("click",p);f.show();c.append(f)}}}function h(d){document.body.removeEventListener("click",h,!1);SearchEventHandler.clearResult()}var g=-1;SearchEventHandler.init=function(){var d=$j("#searchWrap"),b=d.find("#searchInput"),c=d.find("#searchClear");d.show();b.on("keyup",function(a){a=a.which;KeyEventUtils.isArrowKey(a)||KeyEventUtils.isEnterKey(a)||(SearchEventHandler.clearResult(),SearchEventHandler.searchEvents())});b.on("keydown",
function(a){var e=a.which;if(KeyEventUtils.isEnterKey(e))a=$j("#searchWrap").find("#searchList"),e=a.find("[id^=result_]:visible"),0!=e.length&&(a=a.find(e[g]),0!=a.length&&a.find("a").click());else if(KeyEventUtils.isArrowKey(e))a:{e=$j("#searchWrap").find("#searchList");var f=e.find("[id^=result_]:visible");if(0!=f.length){a=a.which;if(KeyEventUtils.isUpArrowKey(a)){if(0>=g)break a;g--}if(KeyEventUtils.isDownArrowKey(a)){if(g>=f.length-1)break a;g++}f.find("a").removeClass("hover");e.find(f[g]).find("a").addClass("hover")}}});
c.on("click",function(){b.val("");c.hide();SearchEventHandler.clearResult()})};SearchEventHandler.clearResult=function(){var d=$j("#searchWrap").find("#searchList");d.find("#noMatching").hide();d.find("[id^=result_]").remove()};SearchEventHandler.searchEvents=function(){var d=$j("#searchWrap"),b=d.find("#searchInput").val();0!=b.length&&(d.find("#searchClear").show(),$j.ajax({type:"POST",dataType:"JSON",url:PageConfig.landingPath+"/member/playerService/searchEvents",data:{keyword:b},success:function(c){try{c&&
null!=c.searchEvents&&0!=c.searchEvents.length?k(c.searchEvents):$j("#searchWrap").find("#searchList").find("#noMatching").fadeIn()}catch(a){Trace.printStackTrace(a)}},error:function(c,a,e){Trace.log(c.status);Trace.log(e)}}))}})();

