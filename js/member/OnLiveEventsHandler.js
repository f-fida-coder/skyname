"undefined"==typeof OnLiveEventsHandler&&(OnLiveEventsHandler={});
(function(){function h(a){if(null!=a&&null!=a.onLiveEvents&&0!=a.onLiveEvents.length){if(PageConfig.hasAccount||!PageConfig.isFromApi){var b=a.onLiveEvents,c=$j("#tabMenu");if(0!=c.length){k(c);for(var d=0,g=b.length;d<g;d++){var e=b[d],f=EventType.getInstanceOf(e.eventType);null!=f&&(f=c.find("#menu_"+f.name),0!=f.length&&f.is(":visible")&&(f=f.find("#tagLive"),f.find("strong").after(e.count),f.show()))}}}a=a.onLiveEvents;b=$j("#onLiveBoard");if(0!=b.length)for(l(b),c=0,d=a.length;c<d;c++)g=a[c],
e=EventType.getInstanceOf(g.eventType),null!=e&&(e=b.find("#onLiveCount_"+e.name),0!=e.length&&e.is(":visible")&&e.find("#count").html(g.count))}}function k(a){var b=a.find("[id^=menu_]");0!=b.length&&$j.each(b,function(c,d){d=a.find(b[c]);UiUtils.removeContents(d.find("#tagLive"))})}function l(a){var b=a.find("[id^=onLiveCount_]");0!=b.length&&$j.each(b,function(c,d){d=a.find(b[c]);UiUtils.removeContents(d.find("#count"))})}OnLiveEventsHandler.queryTask=null;OnLiveEventsHandler.init=function(){OnLiveEventsHandler.initTask()};
OnLiveEventsHandler.initTask=function(){if(null==OnLiveEventsHandler.queryTask){var a=TaskExecuter.createTask(PageConfig.getOnLiveEventsTaskCycleTime,0,function(){OnLiveEventsHandler.queryOnLiveEvents(this,h)});OnLiveEventsHandler.queryTask=a}else OnLiveEventsHandler.queryTask.isStop=!1;OnLiveEventsHandler.queryTask.run();TaskExecuter.execute()};OnLiveEventsHandler.abortTask=function(a){null!=a&&a.stop()};OnLiveEventsHandler.queryOnLiveEvents=function(a,b){try{$j.ajax({type:"POST",dataType:"JSON",
url:(PageConfig.enableQueryDataSubdomain&&null!=QueryDataSubDomainUtil.queryHost?QueryDataSubDomainUtil.queryHost:"")+"/exchange/member/playerService/queryOnLiveEvents",data:{queryPass:PageConfig.queryPass},xhrFields:{withCredentials:!0},success:b,error:function(c,d,g){PageConfig.enableQueryDataSubdomain&&null!=QueryDataSubDomainUtil.queryHost&&!QueryDataSubDomainUtil.isLineDown&&(QueryDataSubDomainUtil.queryHost=null,QueryDataSubDomainUtil.isLineDown=!0);Trace.log(c.status);Trace.log(g)}})}catch(c){Trace.printStackTrace(c)}finally{a.check(),
TaskExecuter.execute()}}})();

