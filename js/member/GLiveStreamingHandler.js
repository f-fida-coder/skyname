"undefined"==typeof GLiveStreamingHandler&&(GLiveStreamingHandler={});
(function(){GLiveStreamingHandler.init=function(){$j("#openStreaming, #lmtOpenStreaming").on("click",function(){$j("#lmtOpenStreaming").hide();$j("#openStreaming").hide();"undefined"!=typeof LoginHandler&&!LoginHandler.userIsLogin()||null==PageConfig.streamingChannel||"null"==PageConfig.streamingChannel||"0"==PageConfig.streamingChannel||($j("#tv-wrap").is(":visible")?(GLiveStreamingHandler.closeStreamingBox(),PageConfig.userCloseStreaming=!0):(GLiveStreamingHandler.openStreamingBox(PageConfig.streamingChannel),
PageConfig.userCloseStreaming=!1),setTimeout(function(){$j("#lmtOpenStreaming").show();$j("#openStreaming").show()},700))});$j("#closeStreamingBox").on("click",function(){GLiveStreamingHandler.closeStreamingBox();PageConfig.userCloseStreaming=!0})};GLiveStreamingHandler.openStreamingBox=function(b){PageConfig.hasAccount?($j("#lmtOpenStreaming").show(),$j("#openStreaming").show(),$j("#lmtOpenStreaming").addClass(" close_tv"),$j("#openStreaming").addClass(" close_tv"),$j("#tv-wrap").fadeIn(),(null!=
b&&b!=PageConfig.streamingChannel||0==PageConfig.gliveStreamingUrl.length)&&GLiveStreamingHandler.update(b)):$j("#tv-wrap").fadeOut()};GLiveStreamingHandler.update=function(b){GLiveStreamingHandler.fetchLiveStreamingSource(b).then(function(a){a&&0<a.length?($j("#gliveStreamingIframe").attr("src",a),$j("#tv-wrap").fadeIn()):(console.log("glive streaming url is empty:",b),GLiveStreamingHandler.closeStreamingBox())}).catch(function(a){console.log("Error fetching live streaming source:",a);GLiveStreamingHandler.closeStreamingBox()})};
GLiveStreamingHandler.closeStreamingBox=function(){$j("#tv-wrap").fadeOut();$j("#lmtOpenStreaming").removeClass(" close_tv");$j("#openStreaming").removeClass(" close_tv");$j("#gliveStreamingIframe").attr("src","");PageConfig.gliveStreamingUrl=""};GLiveStreamingHandler.fetchLiveStreamingSource=function(b){return new Promise((a,d)=>{$j.ajax({type:"POST",dataType:"JSON",url:"/exchange/member/playerService/getStreamingUrl",data:{matchId:b},beforeSend:function(){},complete:function(){a()},success:function(c){c?
c.error?(console.log(c.error),a(null)):(PageConfig.gliveStreamingUrl=c.streamingUrl,a(c.streamingUrl)):a(null)},error:function(){}})})}})();

