"undefined"==typeof SportsBookMultiMarketHandler&&(SportsBookMultiMarketHandler={});
(function(){SportsBookMultiMarketHandler.queryTasks=[];SportsBookMultiMarketHandler.init=function(a){ApiSiteType.SPORTRADAR.unique()==a&&SportsBookMultiMarketHandler.isEnableSportsBookBet()&&MultiMarketsHandler.isHasSportsBookMultiMarket()&&SportsBookMultiMarketHandler.initTask(ApiSiteType.SPORTRADAR.unique());ApiSiteType.OW.unique()==a&&SportsBookMultiMarketHandler.isEnableOwSportsBookBet()&&MultiMarketsHandler.isHasOwSportsBookMultiMarket()&&SportsBookMultiMarketHandler.initTask(ApiSiteType.OW.unique())};
SportsBookMultiMarketHandler.initTask=function(a){if(null==SportsBookMultiMarketHandler.queryTasks[a]){var b=TaskExecuterV2.createTask(PageConfig.getSportsBookEventTaskCycleTime,0,function(){SportsBookMultiMarketHandler.querySportsBookMultiMarkets(this,a)});b.version={};b.oddsSettingVersion={};b.apiSiteType=a;SportsBookMultiMarketHandler.queryTasks[a]=b}else SportsBookMultiMarketHandler.queryTasks[a].isStop=!1;SportsBookMultiMarketHandler.queryTasks[a].run();TaskExecuterV2.execute()};SportsBookMultiMarketHandler.abortTask=
function(a){null!=SportsBookMultiMarketHandler.queryTasks[a]&&SportsBookMultiMarketHandler.queryTasks[a].stop()};SportsBookMultiMarketHandler.isEnableSportsBookBet=function(){return AccountUtil.isEnableSportsBook(PageConfig.isAllowSportsbook,ApiSiteType.SPORTRADAR.unique())&&PageConfig.isOfferSportradarSportsBook};SportsBookMultiMarketHandler.isEnableOwSportsBookBet=function(){return AccountUtil.isEnableSportsBook(PageConfig.isAllowSportsbook,ApiSiteType.OW.unique())&&PageConfig.isOfferOwSportsBook};
SportsBookMultiMarketHandler.querySportsBookMultiMarkets=function(a,b){var d=ApiSiteType.SPORTRADAR.unique()==b?CategoryType.SPORTRADAR_SPORTSBOOK.unique():CategoryType.OW_SPORTSBOOK.unique();d=DataBase.multiMarkets.queryAllByCategoryType(d);for(var k=[],e=0;e<d.length;e++){var f=d[e];k.push({eventType:f.eventType,betfairEventId:f.eventId,marketId:f.marketId,selectionTs:-1,apiSiteType:b})}$j.ajax({type:"POST",dataType:"JSON",url:(PageConfig.enableQueryDataSubdomain&&null!=QueryDataSubDomainUtil.queryHost?
QueryDataSubDomainUtil.queryHost:"")+PageConfig.landingPath+"/member/playerService/querySportsBookMultiMarkets",data:{marketPks:JSON.stringify(k),queryPass:PageConfig.queryPass},xhrFields:{withCredentials:!0},success:function(c){try{if(c){var g=c.sportsBookEvents;for(c=0;c<g.length;c++)SportsBookEventHandler.updateSportsBookEvent(b,g[c])}}catch(h){Trace.printStackTrace(h)}finally{a.check(),TaskExecuterV2.execute()}},error:function(c,g,h){PageConfig.enableQueryDataSubdomain&&null!=QueryDataSubDomainUtil.queryHost&&
!QueryDataSubDomainUtil.isLineDown&&(QueryDataSubDomainUtil.queryHost=null,QueryDataSubDomainUtil.isLineDown=!0);Trace.log(c.status);Trace.log(h);a.check();TaskExecuterV2V2.execute()}})}})();

