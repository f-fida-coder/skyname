var GreyHoundRacingPage={};
(function(){function c(a){RacingSportUtil.initQueryRacingByDay(a,EventType.GREYHOUND_RACING.value,function(b){try{b.marketTs>GreyHoundRacingPage.marketTs&&(GreyHoundRacingPage.marketTs=b.marketTs),RacingSportUtil.initRenderRacing(b.events),0==$j("#contentBox").find("div").length?$j("#noDataDiv").show():$j("#noDataDiv").hide()}catch(d){Trace.printStackTrace(d)}finally{setTimeout(function(){$j("#loading").hide()},250)}})}function e(a){$j.ajax({type:"POST",dataType:"JSON",url:PageConfig.landingPath+
"/member/playerService/queryRacingByDay",data:{dayType:GreyHoundRacingPage.selectDayType,eventType:EventType.GREYHOUND_RACING.value,marketTs:GreyHoundRacingPage.marketTs},success:function(b){try{GreyHoundRacingPage.tabChanged?(GreyHoundRacingPage.marketTs=-1,GreyHoundRacingPage.tabChanged=!1):(b.marketTs>GreyHoundRacingPage.marketTs&&(GreyHoundRacingPage.marketTs=b.marketTs),0<b.events.length&&RacingSportUtil.updateMarkets(b.events))}catch(d){Trace.printStackTrace(d)}finally{a.check(),TaskExecuter.execute()}},
error:function(){a.check();TaskExecuter.execute()}})}GreyHoundRacingPage.marketTs=-1;GreyHoundRacingPage.tabChanged=!1;GreyHoundRacingPage.selectDayType="today";GreyHoundRacingPage.init=function(){"#Today"!=location.hash&&"#Tomorrow"!=location.hash&&"#AftTomorrow"!=location.hash?(location.hash="#Today",location.reload()):($j(window).bind("hashchange",function(){var a=location.hash;""==a?(location.hash="#Today",location.reload()):GreyHoundRacingPage.route(a)}),GreyHoundRacingPage.route(location.hash))};
GreyHoundRacingPage.initMenu=function(){NavigationBar.addNode({id:EventType.GREYHOUND_RACING.value,type:"EVENT_TYPE",name:"Greyhound Racing"});NavigationHandler.getMenu([EventType.GREYHOUND_RACING.value])};GreyHoundRacingPage.route=function(a){"#Today"==a?(TabMenuHandler.updateSelect("daySelectTab",a.substring(1).toLowerCase()),GreyHoundRacingPage.viewToday()):"#Tomorrow"==a?(TabMenuHandler.updateSelect("daySelectTab",a.substring(1).toLowerCase()),GreyHoundRacingPage.viewTomorrow()):"#AftTomorrow"==
a?(TabMenuHandler.updateSelect("daySelectTab",a.substring(1).toLowerCase()),GreyHoundRacingPage.viewAftTomorrow()):$j("#loading").hide()};GreyHoundRacingPage.viewToday=function(){GreyHoundRacingPage.tabChanged=!0;GreyHoundRacingPage.selectDayType="today";$j("#contentBox").children().remove();c("today")};GreyHoundRacingPage.viewTomorrow=function(){GreyHoundRacingPage.tabChanged=!0;GreyHoundRacingPage.selectDayType="tomorrow";$j("#contentBox").children().remove();c("tomorrow")};GreyHoundRacingPage.viewAftTomorrow=
function(){GreyHoundRacingPage.tabChanged=!0;GreyHoundRacingPage.selectDayType="aftTomorrow";$j("#contentBox").children().remove();c("aftTomorrow")};GreyHoundRacingPage.updateGreyHoundRacingMarkets=null;GreyHoundRacingPage.initUpdateGreyHoundRacingMarkets=function(){GreyHoundRacingPage.updateGreyHoundRacingMarkets=TaskExecuter.createTask(PageConfig.updateGreyHoundRacingMarketsCycleTime,2,function(){e(this)});GreyHoundRacingPage.updateGreyHoundRacingMarkets.run();TaskExecuter.execute()}})();

