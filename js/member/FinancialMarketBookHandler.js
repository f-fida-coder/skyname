"undefined"==typeof FinancialMarketBookHandler&&(FinancialMarketBookHandler={});
(function(){function g(a,b,c,d,e){a=a.find("#trTemp").clone();a.find("#price").addClass(b);a.find("#price").html(c);a.find("#exposure").addClass(b);a.find("#exposure").html(CurrencyUtil.formatter(d,e));a.show();return a}FinancialMarketBookHandler.init=function(){FinancialMarketBookHandler.queryFinancialMarketBook()};FinancialMarketBookHandler.queryFinancialMarketBook=function(){$j.ajax({type:"POST",dataType:"JSON",url:"/exchange/member/playerService/queryFinancialMarketBook",data:{apiSite:PageConfig.apiSite,
eventId:PageConfig.eventId,marketId:PageConfig.marketId},success:function(a){try{if(a&&a.betPriceExposures&&0!=a.betPriceExposures.length){var b=a.betPriceExposures,c=$j("#logWrap").find("#table"),d={precision:2,separateSign:",",currencySymbol:CurrencyType.getInstanceOf(PageConfig.playerCurrency).symbol,formatter:CurrencyUtil.DefaultFormatter,"trailingZeros,":!1};for(a=0;a<b.length;a++){var e=b[a],f=e.price,h=e.exposure,l=0<=h?SideType.Back.name.toLowerCase():SideType.Lay.name.toLowerCase();0==a&&
(f=b[a+1].price-1);var r=g(c,l,f,h,d);c.append(r);if(a<b.length-1){var m=b[a+1];if(1<m.price-f)for(var n=c,p=e,t=m,u=d,k=p.price+1;k<t.price;k++){var q=p.exposure,v=0<=q?SideType.Back.name.toLowerCase():SideType.Lay.name.toLowerCase(),w=g(n,v,k,q,u);n.append(w)}}if(a==b.length-1){var x=g(c,l,f+1,h,d);c.append(x)}}}}catch(y){Trace.printStackTrace(y)}},error:function(a,b,c){Trace.log(a.status);Trace.log(c)}})};FinancialMarketBookHandler.showBookBtn=function(a,b,c){a&&b&&c&&(a=$j("#overWrap").find("#financialTable_"+
b).find("#financialMarketList").find("#financialMarket_"+DataBase.financialMarkets.getEventMarketKey(a,b,c)+":visible"),0!=a.length&&(0==DataBase.financialTxn.getByMarketId(b,c,null,null,CategoryType.TS_BINARY.unique()).length?a.find("#financialBookBtn").hide():a.find("#financialBookBtn").show()))}})();

