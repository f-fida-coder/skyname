"undefined"==typeof FancyBetLotteryHandler&&(FancyBetLotteryHandler={});
(function(){function q(g,a){g.find("#lotteryBall a").off("click").on("click",function(){var c=$j(this),b=parseInt(c.prop("id").split("lotteryNo_")[1]);b=FancyBetLotterySelectionType.getInstanceOf(b);if(null!=b){if(c.hasClass("select"))b=a.lotteryBall.indexOf(b.value),-1<b&&a.lotteryBall.splice(b,1),DataBase.fancyBet.updateLotteryBall(a.eventId,a.marketId,a.sideType,a.lotteryBall),c.removeClass("select");else{b=b.value;var k=a.lotteryBall.indexOf(b);-1<k&&a.lotteryBall.splice(k,1);a.lotteryBall.push(b);
DataBase.fancyBet.updateLotteryBall(a.eventId,a.marketId,a.sideType,a.lotteryBall);c.addClass("select")}FancyBetHandler.eventCalculate(g,a.eventId,a.marketId,a.sideType)}})}function r(g,a,c,b,k){g.find("#placeBet").off("click").on("click",function(){if("undefined"==typeof LoginHandler||LoginHandler.userIsLogin()){var d=FancyBetHandler.getfancyBetMessage(g,c);var e=g.find("#inputStake"),h=parseFloat(e.val())||0,f=DataBase.fancyBet.get(a,c,b),l="",n=FancyBetHandler.checkBetStake(f);if(!n){var m=DataBase.fancyBetMarkets.get(a,
f.marketId),p=m.min;m=m.max;h<p?(e.val(p),DataBase.fancyBet.updateStake(a,c,b,p),l+=I18N.get("msg.member.minBet")):h>m&&(e.val(m),DataBase.fancyBet.updateStake(a,c,b,m),l+=I18N.get("msg.member.maxBet"))}(f=FancyBetHandler.checkLotteryNo(f))||(l+=I18N.get("msg.member.lotteryBall.empty"));(""==l||n)&&f||FancyBetHandler.showfancyBetMessage(d,"warning",l,!0);FancyBetHandler.getExposure(a,c);n&&f?(f=DataBase.fancyBet.getForLotteryBet(a,c,b),l=$j("#fancyBetBar_"+k),0==l.length&&(l=FancyBetHandler.genfancyBetBar(k),
g.after(l)),FancyBetHandler.submitBet(f,l,d,null,!1),g.hide()):f&&g.find("#placeBet").removeClass("disable")}})}FancyBetLotteryHandler.appendBoard=function(g,a,c,b,k,d){var e=DataBase.fancyBetMarkets.get(a,c);if(null!=e){FancyBetHandler.clearBoard(a);var h=DataBase.fancyBet.generateKey(a,c,b);k=DataBase.fancyBet.addLotteryBet(e.eventType,a,c,b,k,d,e.eventName,e.marketName,e.marketType);e=!1;d=$j("#overWrap");var f=d.find("#fancyBetBoard_"+h);0==f.length&&(d=d.find("#fancyBetLotteryTemplate").clone(),
f=FancySideType.YES.unique()==b?SideType.Back.name:SideType.Lay.name,d.find("#classWrap").removeClass("slip-back").removeClass("slip-lay").addClass("slip-"+f.toLowerCase()),d.prop("id","fancyBetBoard_"+h),d.prop("eventId",a),d.prop("marketId",c),d.prop("sideType",b),d.prop("marketType",k.marketType),r(d,a,c,b,h),FancyBetHandler.bindClickEvent(d,a,c,b,h),f=d);q(f,k);h=f;g.after(h.fadeIn());null!=PageConfig.userCoin&&0<PageConfig.userCoin?(e=DataBase.fancyBetMarkets.get(a,c),g=parseFloat(PageConfig.userCoin),
e.min&&parseFloat(e.min)>PageConfig.userCoin&&(g=parseFloat(e.min)),h.find("#inputStake").val(g),e=DataBase.fancyBet.updateStake(a,c,b,g)):h.find("#inputStake").val("");FancyBetHandler.getfancyBetMessage(h,c);FancyBetHandler.eventCalculate(h,a,c,b,e);FancyBetHandler.updateExposure(a);CoinHandler.showFancyBetCoin(h)}}})();

