"undefined"==typeof UpcomingHandler&&(UpcomingHandler={});
(function(){UpcomingHandler.queryTask=null;UpcomingHandler.init=function(){UpcomingHandler.queryTask=TaskExecuter.createTask(PageConfig.queryUpcomingHorseRaceCycleTime,0,function(){UpcomingHandler.queryUpcomingHorseRace(this)});UpcomingHandler.queryTask.run();TaskExecuter.execute();JsCache.get("#upcomingHorseRace")&&JsCache.get("#upcomingHorseRace").show()};UpcomingHandler.queryUpcomingHorseRace=function(d){UpcomingHandler.ajax(d)};UpcomingHandler.ajax=function(d){$j.ajax({type:"POST",dataType:"JSON",
url:(PageConfig.enableQueryDataSubdomain&&null!=QueryDataSubDomainUtil.queryHost?QueryDataSubDomainUtil.queryHost:"")+PageConfig.queryUpcomingHorseRacePath,data:{queryPass:PageConfig.queryPass},xhrFields:{withCredentials:!0},success:function(a){try{if(a){$j("#nextHeader").nextAll().remove();$j("#upcomeHeader").nextAll().remove();var e=0,b;for(b in a){if(EventUtils.isCloseSite(a[b].eventCloseSite,PageConfig.webSiteType)||MarketUtil.isCloseSite(a[b].marketCloseSite,PageConfig.webSiteType)){$j("#upcoming_"+
a[b].marketId).remove();continue}var c=ElementPool.getUpcomingRaceTempLateElement(),f=$j(c).find("a");f.prop("id","upcoming_"+a[b].marketId);let g=PageConfig.fullMarketPath+"?eventType="+a[b].eventType+"&eventId="+a[b].eventId+"&marketId="+a[b].marketId;$j(f).text(a[b].startTime+" "+a[b].raceName);$j(f).attr("href",g);if(a[0].startTime==a[b].startTime&&3>e){var h=$j(c).find("span");$j(h).text(a[b].marketName);$j("#next").append(c);e++}else $j("#upcoming").append(c)}}}catch(g){Trace.printStackTrace(g)}finally{d.check(),
TaskExecuter.execute()}},error:function(a,e,b){PageConfig.enableQueryDataSubdomain&&null!=QueryDataSubDomainUtil.queryHost&&!QueryDataSubDomainUtil.isLineDown&&(QueryDataSubDomainUtil.queryHost=null,QueryDataSubDomainUtil.isLineDown=!0);Trace.log(a.status);Trace.log(b)}})}})();"undefined"==typeof ElementPool&&(ElementPool={});(function(){ElementPool.getUpcomingRaceTempLateElement=function(){return DOMUtil.nextChildElement(DOMUtil.findById("upcomingRaceTempLate").cloneNode(!0))}})();

